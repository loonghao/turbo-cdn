# æ™ºèƒ½ä¸‹è½½

Turbo CDN çš„æ™ºèƒ½ä¸‹è½½æ¨¡å¼è‡ªåŠ¨é€‰æ‹©æœ€ä½³ä¸‹è½½æ–¹å¼ã€‚

## æ¦‚è¿°

æ™ºèƒ½ä¸‹è½½æ˜¯ Turbo CDN çš„**é»˜è®¤æ¨¡å¼**ã€‚å®ƒè‡ªåŠ¨ï¼š

1. æµ‹è¯•ç›´æ¥ä¸‹è½½æ€§èƒ½
2. æµ‹è¯• CDN é•œåƒæ€§èƒ½
3. æ¯”è¾ƒç»“æœ
4. é€‰æ‹©æœ€å¿«çš„é€‰é¡¹
5. ä½¿ç”¨æœ€ä¼˜æ–¹å¼ä¸‹è½½

## å·¥ä½œåŸç†

### å†³ç­–æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ™ºèƒ½ä¸‹è½½æ¨¡å¼                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. URL åˆ†æ                                                 â”‚
â”‚     â””â”€ ç¡®å®šæ˜¯å¦æœ‰å¯ç”¨çš„ CDN ä¼˜åŒ–                              â”‚
â”‚                                                              â”‚
â”‚  2. å¹¶è¡Œæµ‹è¯•                                                 â”‚
â”‚     â”œâ”€ æµ‹è¯•ç›´æ¥ URLï¼ˆHEAD è¯·æ±‚ï¼‰                             â”‚
â”‚     â””â”€ æµ‹è¯• CDN é•œåƒï¼ˆHEAD è¯·æ±‚ï¼‰                            â”‚
â”‚                                                              â”‚
â”‚  3. æ€§èƒ½æ¯”è¾ƒ                                                 â”‚
â”‚     â”œâ”€ æ¯”è¾ƒå»¶è¿Ÿ                                              â”‚
â”‚     â””â”€ è€ƒè™‘å†å²æ€§èƒ½                                          â”‚
â”‚                                                              â”‚
â”‚  4. æ–¹å¼é€‰æ‹©                                                 â”‚
â”‚     â”œâ”€ å¦‚æœ CDN å¿« 20% ä»¥ä¸Š â†’ ä½¿ç”¨ CDN                       â”‚
â”‚     â””â”€ å¦åˆ™ â†’ ä½¿ç”¨ç›´æ¥ä¸‹è½½                                   â”‚
â”‚                                                              â”‚
â”‚  5. æ‰§è¡Œä¸‹è½½                                                 â”‚
â”‚     â””â”€ ä½¿ç”¨é€‰å®šçš„æ–¹å¼ä¸‹è½½                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ä½¿ç”¨æ–¹æ³•

### CLIï¼ˆé»˜è®¤ï¼‰

```bash
# æ™ºèƒ½æ¨¡å¼æ˜¯é»˜è®¤çš„
turbo-cdn dl "https://github.com/user/repo/releases/download/v1.0/file.zip"

# æ˜¾å¼å¯ç”¨æ™ºèƒ½æ¨¡å¼ï¼ˆä¸é»˜è®¤ç›¸åŒï¼‰
turbo-cdn dl "https://github.com/user/repo/releases/download/v1.0/file.zip" --smart

# è¯¦ç»†è¾“å‡ºæ˜¾ç¤ºå†³ç­–è¿‡ç¨‹
turbo-cdn dl "https://github.com/user/repo/releases/download/v1.0/file.zip" --verbose
```

### åº“

```rust
use turbo_cdn::*;

#[tokio::main]
async fn main() -> turbo_cdn::Result<()> {
    let downloader = TurboCdn::new().await?;
    
    // æ™ºèƒ½ä¸‹è½½ï¼ˆé»˜è®¤è¡Œä¸ºï¼‰
    let result = downloader.download_smart("https://github.com/user/repo/releases/download/v1.0/file.zip").await?;
    
    // å¸¦è¯¦ç»†è¾“å‡º
    let result = downloader.download_smart_with_verbose(
        "https://github.com/user/repo/releases/download/v1.0/file.zip",
        true  // verbose
    ).await?;
    
    Ok(())
}
```

## ä¸‹è½½æ¨¡å¼

### æ™ºèƒ½æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰

è‡ªåŠ¨é€‰æ‹©æœ€ä½³æ–¹å¼ï¼š

```bash
turbo-cdn dl "https://example.com/file.zip"
```

### ç›´æ¥æ¨¡å¼

ç»•è¿‡æ‰€æœ‰ä¼˜åŒ–ï¼Œç›´æ¥ä»æºä¸‹è½½ï¼š

```bash
turbo-cdn dl "https://example.com/file.zip" --no-cdn
```

```rust
let result = downloader.download_direct_from_url("https://example.com/file.zip").await?;
```

### CDN æ¨¡å¼

å¼ºåˆ¶ CDN ä¼˜åŒ–ï¼ˆè·³è¿‡æ¯”è¾ƒï¼‰ï¼š

```bash
turbo-cdn dl "https://example.com/file.zip" --force-cdn
```

```rust
let result = downloader.download_from_url("https://example.com/file.zip").await?;
```

## å†³ç­–æ ‡å‡†

### ä½•æ—¶é€‰æ‹© CDN

- CDN å»¶è¿Ÿæ¯”ç›´æ¥ä¸‹è½½**å¿« 20% æˆ–æ›´å¤š**
- ç›´æ¥ URL ä¸å¯è¾¾æˆ–å¾ˆæ…¢
- å†å²æ•°æ®æ˜¾ç¤º CDN æ€§èƒ½æ›´å¥½

### ä½•æ—¶é€‰æ‹©ç›´æ¥ä¸‹è½½

- ç›´æ¥ URL å¾ˆå¿«ï¼ˆå»¶è¿Ÿ < 100msï¼‰
- CDN æ”¹å–„å¾ˆå°ï¼ˆ< 20%ï¼‰
- è¯¥ URL æ²¡æœ‰å¯ç”¨çš„ CDN é•œåƒ

## è¯¦ç»†è¾“å‡º

ä½¿ç”¨ `--verbose`ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å†³ç­–è¿‡ç¨‹ï¼š

```
ğŸ§  æ™ºèƒ½ä¸‹è½½ï¼ˆè‡ªåŠ¨é€‰æ‹©æœ€ä½³æ–¹å¼ï¼‰- é»˜è®¤æ¨¡å¼
=========================================================
æº URL: https://github.com/user/repo/releases/download/v1.0/file.zip
æ¨¡å¼: æ™ºèƒ½æ¨¡å¼ï¼ˆæµ‹è¯•å¹¶é€‰æ‹©æœ€å¿«æ–¹å¼ï¼‰

âœ“ TurboCdn ä»¥æ™ºèƒ½æ¨¡å¼åˆå§‹åŒ–ï¼ˆè‡ªåŠ¨é€‰æ‹©æœ€ä½³æ–¹å¼ï¼‰

æµ‹è¯•ä¸‹è½½æ–¹å¼...
  ç›´æ¥ URL: 150ms å»¶è¿Ÿ
  CDN (ghfast.top): 80ms å»¶è¿Ÿ
  
å·²é€‰æ‹©: CDN (ghfast.top) - å¿« 47%

ğŸ‰ ä¸‹è½½æˆåŠŸå®Œæˆï¼
   ğŸ“ ./file.zip
   ğŸ“Š 25.50 MB (12.30 MB/s)
```

## æ€§èƒ½ä¼˜åŒ–

### æµ‹è¯•è¶…æ—¶

æ™ºèƒ½æ¨¡å¼ä½¿ç”¨çŸ­è¶…æ—¶è¿›è¡Œæµ‹è¯•ï¼š

| æµ‹è¯•ç±»å‹ | è¶…æ—¶ |
|----------|------|
| HEAD è¯·æ±‚ | 3 ç§’ |
| åˆå§‹å­—èŠ‚ | 5 ç§’ |

### ç¼“å­˜

æµ‹è¯•ç»“æœè¢«ç¼“å­˜ä»¥é¿å…é‡å¤æµ‹è¯•ï¼š

- **ç¼“å­˜æ—¶é•¿**ï¼š5 åˆ†é’Ÿ
- **ç¼“å­˜é”®**ï¼šURL + åŒºåŸŸ
- **å¤±æ•ˆ**ï¼šç½‘ç»œå˜åŒ–æ—¶

## ä½•æ—¶è¦†ç›–

### ä½¿ç”¨ `--no-cdn` å½“ï¼š

- æ‚¨çŸ¥é“ç›´æ¥æºæœ€å¿«
- CDN é•œåƒå·²çŸ¥è¿‡æ—¶
- è°ƒè¯•ä¸‹è½½é—®é¢˜

### ä½¿ç”¨ `--force-cdn` å½“ï¼š

- ç›´æ¥æºè¢«é˜»æ­¢æˆ–å¾ˆæ…¢
- æ‚¨æƒ³è¦ä¸€è‡´çš„ CDN è¡Œä¸º
- æµ‹è¯• CDN æ€§èƒ½

## æ•…éšœæ’é™¤

### æ™ºèƒ½æ¨¡å¼é€‰æ‹©äº†é”™è¯¯çš„æ–¹å¼

å¦‚æœæ™ºèƒ½æ¨¡å¼æŒç»­é€‰æ‹©è¾ƒæ…¢çš„é€‰é¡¹ï¼š

1. **æ£€æŸ¥è¯¦ç»†è¾“å‡º**ï¼šæŸ¥çœ‹å®é™…å»¶è¿Ÿ
2. **æ¸…é™¤ç¼“å­˜**ï¼šç»“æœå¯èƒ½è¿‡æ—¶
3. **æŠ¥å‘Šé—®é¢˜**ï¼šå¯èƒ½è¡¨ç¤ºæœ‰ bug

```bash
# æŸ¥çœ‹è¯¦ç»†å†³ç­–è¿‡ç¨‹
turbo-cdn dl "https://example.com/file.zip" --verbose

# å¼ºåˆ¶ç‰¹å®šæ¨¡å¼è¿›è¡Œæ¯”è¾ƒ
turbo-cdn dl "https://example.com/file.zip" --no-cdn --verbose
turbo-cdn dl "https://example.com/file.zip" --force-cdn --verbose
```

### æµ‹è¯•é˜¶æ®µæ…¢

å¦‚æœæµ‹è¯•é˜¶æ®µè€—æ—¶å¤ªé•¿ï¼š

- ç½‘ç»œå¯èƒ½ä¸ç¨³å®š
- è€ƒè™‘ç›´æ¥ä½¿ç”¨ `--force-cdn` æˆ– `--no-cdn`

## ä¸‹ä¸€æ­¥

- [è‡ªé€‚åº”å¹¶å‘](/zh/guide/adaptive-concurrency) - åŠ¨æ€å¹¶è¡ŒåŒ–
- [æ™ºèƒ½åˆ†å—](/zh/guide/smart-chunking) - æ™ºèƒ½åˆ†å—å¤§å°
